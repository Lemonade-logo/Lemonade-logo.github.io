<!Doctype: HTML w/ Processing>

<html>

  <head>
      <title>Welcome to the monkey house</title>
      <link rel="stylesheet" type="text/css" href="style.css">
      <script type="text/javascript" src="/js/processing.js"></script>
  </head>
  
  <body>
    
    <h1>Eowyn's Main Project Page</h1>
    <hr>
    <script type = "text/processing"> 
          /* FLAPPY BIRD IN PROCESSING
       * This goes goes with the 5th video in my Flappy Bird Tutorial
       * Author: Eowyn Gooding
       * Date: 1/2/2020
       */

      PImage bg, kirb, topPipe, botPipe, start; 
      int bgx, bgy, kx, ky, g, Vky, score2;
      int[] pipeX, pipeY; //DECLARE two arrays 
      int gameState, gap, score;

      //ONE TIME
      void setup()
      {
        size(600,600);
        gap = 231;
        score = 0;
        score2 = 0;
        bg = loadImage("./img/bg.png");
        kirb = loadImage("./img/kirb.png");
        botPipe = loadImage("./img/pipe.png");
        topPipe = loadImage("./img/pipe2.png");
        start = loadImage("./img/start.png");
        kx = 100;
        ky = 50;
        g = 1; //Gravity == Speed of downward acceleration
        pipeX = new int[5];  //[0,0,0,0]
        pipeY = new int[pipeX.length];
        //POPULATE THE ARRAY WITH VALUES
        for(int i = 0; i < pipeX.length; i++)
        {
          pipeX[i] = width + 200*i;
          pipeY[i] = (int)random(-150, 0);
        } 
        gameState = -1;
      }

      //MAIN GAME LOOP
      void draw()
      {
        if(gameState == -1)
        {
          bigOlResetButton();
        } else if (gameState==0)
        {
          setBg();
          setPipes();
          kirb();  
          points();
        }
        else
        {
          endScreen();
        }
      }

      void endScreen() {
        text("YOU LOSE, TRY AGAIN?", 300,100);
        score2 = score;
        print(gameState);
        if(mousePressed) {
          for(int i = 0; i < pipeX.length; i++) {
            pipeX[i] = width+ 200*i;
          }
        gameState = 0;
        ky = height/2;
        if(score2 <= score) {
          score = score2;
        }
        score = 0;

        }
      }
      void bigOlResetButton()
      {
        image(start,0,0);
        if(mousePressed) {
          ky = height/2;
          gameState = 0;
        }
      }

      void setPipes()
      {
        //Move the Pipes
        for(int i = 0; i < pipeX.length; i++)
        {
         image(topPipe, pipeX[i], pipeY[i]);
         image(botPipe, pipeX[i], pipeY[i] + 480);
         pipeX[i]-= 2;
         if(pipeX[i] < -200)
         {
           pipeX[i] = width;  
         } 
         if(kx > (pipeX[i]-kirb.width) && kx < pipeX[i] + topPipe.width)
         {
           if(!(ky > pipeY[i] + topPipe.height && ky < pipeY[i] + (topPipe.height + gap)))
           {
             gameState = 1;
           } 
           else if (kx == pipeX[i] || kx == pipeX[i] + 1)
           {
             score = score + 1;
           }
         }
        }  
      }

      void points() {
        textSize(20);
        fill(255);
        textAlign(CENTER);
        text("Score: " + str(score), width - 170, 40);
        text("Highscore : " + str(score2), width - 170, 60);
      }
      void kirb()
      {
         image(kirb, kx, ky);
         ky = ky + Vky;
         Vky = Vky + g;  
         if(ky > height || ky < 0)
         {
           gameState = 1;
         }
      }

      void mousePressed()
      {
         Vky = -15;
      }


      void setBg()
      {
        image(bg, bgx, bgy);
        image(bg, bgx + bg.width, bgy);
        bgx--;
        if(bgx < -bg.width)
        {
           bgx = 0; //RESET images to starting position 
        }  
      }
    </script>
    <canvas id="sketch" height="600px" width="600px" style="border: 1px solid black;"></canvas>
    <h1> Snake Game: </h1>
    <iframe class="game" src="https://editor.p5js.org/eowyngoo.41928/embed/IE8ZR3U27" width = "400px"></iframe>
    <hr>
    <h1> Digital clock </h1>
    <iframe width="400px" height="400px" src="https://editor.p5js.org/eowyngoo.41928/embed/YMZgHb0DG"></iframe>
    <h1> Draw thing </h1>
    <iframe src="https://editor.p5js.org/eowyngoo.41928/embed/4AXzwhIi"></iframe>
  </body>
</html>
